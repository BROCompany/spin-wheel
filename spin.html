<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Spin Berhadiah</title>
<style>
:root{
  --gold1:#fde68a;--gold2:#facc15;--gold3:#eab308;
  --dark1:#020617;--dark2:#0f172a;--red:#dc2626;
}
body{
  margin:0;height:100vh;display:flex;justify-content:center;align-items:center;
  background:radial-gradient(circle at top,#1e293b,#020617);
  font-family:system-ui,sans-serif;overflow:hidden;
}
.container{
  background:linear-gradient(145deg,#0f172a,#020617);
  padding:30px;border-radius:28px;width:380px;text-align:center;
  box-shadow:0 40px 80px rgba(0,0,0,.7);
  border:1px solid rgba(250,204,21,.5);color:var(--gold1);
  position:relative;
}
h2{text-shadow:0 0 12px rgba(250,204,21,.4)}
.pointer{width:0;height:0;border-left:14px solid transparent;border-right:14px solid transparent;border-top:26px solid var(--red);margin:0 auto -6px}
#wheel{
  position:relative;width:260px;height:260px;margin:22px auto 10px;border-radius:50%;
  border:10px solid var(--gold2);
  background:conic-gradient(
    #fde68a 0deg 60deg,#fcd34d 60deg 120deg,
    #fde68a 120deg 180deg,#fcd34d 180deg 240deg,
    #fde68a 240deg 300deg,#fcd34d 300deg 360deg);
  box-shadow:inset 0 0 20px rgba(0,0,0,.4),0 0 30px rgba(250,204,21,.4);
  transition:transform 4s cubic-bezier(.17,.67,.12,.99);
}
.label{
  position:absolute;width:50%;left:50%;top:50%;transform-origin:left center;
  font-size:14px;font-weight:700;color:#78350f;text-shadow:0 1px 2px rgba(0,0,0,.6);
}
button{
  margin-top:14px;padding:12px 26px;border:none;border-radius:14px;
  background:linear-gradient(145deg,var(--gold2),var(--gold3));
  color:#78350f;font-weight:700;cursor:pointer;
}
button:disabled{background:#475569;color:#1e293b;cursor:not-allowed}

/* Floating Backpack */
.backpack-btn{
  position:fixed;
  left:16px;
  bottom:16px;
  width:54px;
  height:54px;
  border-radius:14px;
  border:none;
  background:linear-gradient(145deg,#64748b,#475569);
  color:white;
  font-size:22px;
  box-shadow:0 10px 25px rgba(0,0,0,.6);
  cursor:pointer;
}

/* Modal */
.modal{position:fixed;inset:0;background:rgba(2,6,23,.85);display:flex;justify-content:center;align-items:center;opacity:0;pointer-events:none;transition:.3s}
.modal.show{opacity:1;pointer-events:auto}
.modal-box{
  background:linear-gradient(145deg,#0f172a,#020617);
  border-radius:24px;padding:24px 28px;text-align:center;
  border:1px solid rgba(250,204,21,.6);
  box-shadow:0 20px 60px rgba(0,0,0,.8);
  color:var(--gold1);animation:pop .4s ease;
  max-height:70vh;overflow:auto;width:320px;
}
@keyframes pop{from{transform:scale(.8);opacity:0}to{transform:scale(1);opacity:1}}

.inventory-item{
  padding:10px;border-bottom:1px solid rgba(250,204,21,.2);
  display:flex;justify-content:space-between
}
.inventory-item.zonk{color:var(--red)}
</style>
</head>
<body>

<div class="container">
  <h2>ðŸŽ‰ Spin Berhadiah</h2>
  <div class="pointer"></div>
  <div id="wheel"></div>
  <button id="spinBtn">Spin Sekarang</button>
  <div id="result"></div>
</div>

<button class="backpack-btn" onclick="openBackpack()">ðŸŽ’</button>

<!-- Result Modal -->
<div class="modal" id="resultModal">
  <div class="modal-box">
    <h3 id="modalTitle"></h3>
    <div id="modalPrize" style="font-size:26px;margin:10px 0"></div>
    <button onclick="closeResult()">OK</button>
  </div>
</div>

<!-- Backpack Modal -->
<div class="modal" id="backpackModal">
  <div class="modal-box">
    <h3>ðŸŽ’ Backpack</h3>
    <div id="inventoryList"></div>
    <button onclick="clearInventory()">Reset</button>
    <button onclick="closeBackpack()">Tutup</button>
  </div>
</div>

<script>
const prizes=["Rp10.000","Rp20.000","Rp50.000","Rp100.000","Rp500.000","ZONK ðŸ˜…"];

const wheel=document.getElementById("wheel");
const slice=360/prizes.length;
prizes.forEach((p,i)=>{
  const d=document.createElement("div");
  d.className="label";
  d.style.transform=`rotate(${i*slice}deg) translateX(22px)`;
  d.innerText=p;
  wheel.appendChild(d);
});

let inventory=JSON.parse(localStorage.getItem("inventory")||"[]");

function saveInventory(item){
  inventory.push({item, time:new Date().toLocaleString()});
  localStorage.setItem("inventory",JSON.stringify(inventory));
}

function openBackpack(){renderInventory();document.getElementById("backpackModal").classList.add("show");}
function closeBackpack(){document.getElementById("backpackModal").classList.remove("show");}
function closeResult(){document.getElementById("resultModal").classList.remove("show");}

function renderInventory(){
  const list=document.getElementById("inventoryList");
  list.innerHTML="";
  if(inventory.length===0){list.innerHTML="<p>Kosong...</p>";return;}
  inventory.forEach(i=>{
    const div=document.createElement("div");
    div.className="inventory-item"+(i.item.includes("ZONK")?" zonk":"");
    div.innerHTML=`<span>${i.item}</span><small>${i.time}</small>`;
    list.appendChild(div);
  });
}

function clearInventory(){
  if(confirm("Hapus semua isi backpack?")){
    inventory=[];
    localStorage.removeItem("inventory");
    renderInventory();
  }
}

/* === Spin Limit === */
const MAX_SPINS=1;
let spinsLeft=localStorage.getItem("spinsLeft");
if(spinsLeft===null){spinsLeft=MAX_SPINS;localStorage.setItem("spinsLeft",spinsLeft);}
else spinsLeft=parseInt(spinsLeft);

const spinBtn=document.getElementById("spinBtn");
const result=document.getElementById("result");

updateStatus();

spinBtn.onclick=()=>{
  if(spinsLeft<=0)return;
  spinsLeft--;localStorage.setItem("spinsLeft",spinsLeft);
  spinBtn.disabled=true;

  const idx=Math.floor(Math.random()*prizes.length);
  const angle=360*5+(360-idx*slice-slice/2);
  wheel.style.transform=`rotate(${angle}deg)`;

  setTimeout(()=>{
    const prize=prizes[idx];
    saveInventory(prize);
    result.textContent="Kamu dapat: "+prize;
    document.getElementById("modalTitle").textContent=prize.includes("ZONK")?"ZONK ðŸ˜…":"Selamat ðŸŽ‰";
    document.getElementById("modalPrize").textContent=prize;
    document.getElementById("resultModal").classList.add("show");
    updateStatus();
  },4000);
};

function updateStatus(){
  if(spinsLeft<=0){spinBtn.disabled=true;result.textContent="Kesempatan kamu sudah habis ðŸ˜Š";}
  else result.textContent="Sisa kesempatan: "+spinsLeft;
}
</script>

</body>
</html>